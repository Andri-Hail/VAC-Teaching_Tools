<!DOCTYPE html>
<html>
<head>
	<title>Button Example</title>
	<link rel="shortcut icon" type="image/x-icon" href="/logo.png"/>
	<script
  src="https://code.jquery.com/jquery-3.4.1.js"
  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="/ace/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.2/css/bulma.min.css">
   <script type="text/javascript">
   	var style_list  =
   	`

	background-color	Defines an element's background color.
	border	Sets the width, style, and color for all four sides of an element's border.
	width	Specify the width of an element in pixels or percentage of the screen.
	height	Specify the height of an element in pixels or percentage of the screen.
	color	Specify the color of the text of an element.
	opacity 	Specifies the transparency of an element.
	font	Defines a variety of font properties within one declaration.
	margin	Sets the margin on all four sides of the element.
	padding	Sets the padding on all four sides of the element.
	text-align	Sets the horizontal alignment of inline content.
   	`
   </script>
   <style type="text/css">
   	/* The Modal (background) */

   	.child_element{
   		display:inline-block;
   		clear: both;
   		text-align: center;
   		align-items: center;
   		margin-top: -5%;
   		margin-bottom: 0%;
   	}

   	button{
		display: inline-block;
   	}


#joined_count_div{
  position: absolute;
  left:90%;
  top:0%;
}

.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content/Box */
.modal-content {
  background-color: #fefefe;
  margin: 15% auto; /* 15% from the top and centered */
  padding: 20px;
  border: 1px solid #888;
  width: 80%; /* Could be more or less, depending on screen size */
}

/* The Close Button */
.close {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: black;
  text-decoration: none;
  cursor: pointer;
}

#output_div{
	margin-top: 0px;
}

   </style>

</head>
<body class="tile is-parent" style = " align-items: space-around; display: flex; white-space: pre-wrap; height: 1600px; background-color: #8CC548;">
	 <div id = "joined_count_div">
	    <button onclick = "window.location = 'https://secret-dusk-20902.herokuapp.com/review'"> Back to review</button>

	    
	  </div>
	<section class="section" style = "width: 100%;">
	<article class="tile is-child notification is-danger" style = "position: absolute; top:-2%; left:20%; width:60%; height: 10%;display: flex; flex-direction: row; justify-content: center;background-color:navy">
		<button class = "button" onclick="skip_level();" >Skip level</button>
		<button class = "button"   onclick="next_level()">Submit Answer</button>
		<button class = "button"   onclick="alert('<Button></Button>\n<Text></Text>\n<TextInput></TextInput>')">Remind me what tags I can write</button>
		<button hidden  class = "button" id ="style_list_button"  onclick="alert(style_list)">Style List</button>
	</article>
	<article  style = "position: absolute;top:14%; width: 30%; left:16%;" class="tile is-child">
		<h3 style = "margin-left:37%; text-align: center; text-decoration-line: underline; float:left; color:#1E1D47" class="title is-3">CODE</h3>
		<div style="border:solid 5px black;">
		<p id="input_div" style = "font-size:24px; float:left; color: #1C1B79;" contenteditable="true" white>&lt;Button style = {{width:400px, height: 100px}} &gt;
I'M A BUTTON
&lt;/Button&gt;
		</p>
	  </div>
	</article>
	<article style = " position: absolute; left: 50%;align-items: center; top:18%; width: 45%;" class="tile is-child">
		<h3 style = "margin-bottom: -5%; text-decoration-line: underline; text-align: center; color: #1E1D47; "  class="child_element title is-3"> MAKE THIS:</h3>
		<div style = "border:solid 5px black; width: 80%; display: flex;align-items: center; justify-content: center; " class = "child_element" id = "output_div">
			<button style = "width:400px; height: 100px; display: inline-block; align-self: center;">I'M A BUTTON</button>
		</div>
	</article>
	<article style = "position: absolute; left: 50%;align-items: center; top:54%; width: 45%;" class="tile is-child">
		<h3 class = "child_element title is-3" style = "text-align: center; text-decoration-line: underline; margin-top: -20%; color: #1E1D47;" >LOOK LIKE THIS:</h3>
		<div style = "border:solid 5px black; width: 80%; display: flex;align-items: center; justify-content: center; " class = "child_element" id = "goal_div">
	    	<button style = "width:400px; height: 100px;" >I'M A BUTTON THAT SAYS THIS</button>
	    </div>
	</article>
	</section>
	<script type="text/javascript">
		function render(){
			console.log("HERE")
		// var functions = getFromBetween.get($("#input_div").text(),"{{","}}")
		var input = $("#input_div").text()
		// var i = -1;
		// while(input.indexOf("{{") !== -1 && input.indexOf("}}") !== -1){
		// 	i++;
		// 	input = input.replace(/\{{(.+?)\}}/,eval(functions[i]))
		// }

		input = input.replace("{{",'"')
		input = input.replace("}}",';"')

		input = input.replace(",",';').replace(",",';').replace(",",';').replace(",",';').replace(",",';')
		input = input.replace("Button",'button')
		input = input.replace("TextInput",'input type = "text"')
		input = input.replace("Text",'p')
		input = input.replace("Button",'button')
		input = input.replace("Button",'button')
		input = input.replace("Button",'button')
		input = input.replace("Button",'button')
		input = input.replace("Button",'button')
		input = input.replace("Button",'button')
		input = input.replace("Button",'button')
		input = input.replace("Button",'button')
		input = input.replace("TextInput",'input type = "text"')
		input = input.replace("TextInput",'input type = "text"')
		input = input.replace("TextInput",'input type = "text"')
		input = input.replace("TextInput",'input type = "text"')
		input = input.replace("TextInput",'input type = "text"')
		input = input.replace("Text",'p')
		input = input.replace("Button",'button')
		input = input.replace("TextInput",'input type = "text"')
		input = input.replace("Text",'p')
		input = input.replace("Text",'p')
		input = input.replace("Text",'p')
		input = input.replace("Text",'p')
		input = input.replace("Text",'p')
		input = input.replace("Text",'p')
		input = input.replace("Text",'p')
		input = input.replace("Text",'p')

	

		 $("#output_div").empty().append(input)
		}

		$("#input_div").on("input",render)
	</script>

	<div id="myModal" class="modal">

	  <!-- Modal content -->
	  <div class="modal-content">
	    <span class="close">&times;</span>

	  </div>

	</div>
	<script type="text/javascript">
		window.level = 0;
		// Get the modal
var modal = document.getElementById("myModal");

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on the button, open the modal


// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}

function check(){

	if ($("#output_div").children().length !== $("#goal_div").children().length){return false}
	var output = true;
	var goal_children = $("#goal_div").children();

	$("#output_div").children().each(function(ind,elem){

		if($(elem).prop("tagName") !== $(goal_children.get(ind)).prop("tagName")){
			output = false;
		}

		if($(elem).text().trim() !== $(goal_children.get(ind)).text().trim()){
			output = false;
		}

		if($(goal_children.get(ind)).attr('style') !== undefined){
			var corresponding_child_attributes = $(goal_children.get(ind)).attr('style').split(";")
			var obj = {}

			corresponding_child_attributes.forEach(function(attr){
				if(attr.trim().length === 0){return}
				obj[attr.split(":")[0].trim()] = attr.split(":")[1].trim()
			})
		}

		if($(elem).attr('style') !== undefined){
			$(elem).attr('style').split(";").forEach(function(attr){
				if(attr.trim().length === 0){return}

				if(obj[attr.split(":")[0].trim()] !== attr.split(":")[1].trim()){
					output = false;
				}
			})
		}
	})
	return output;
}

function next_level(){
	if(check()){
		alert(window.levels[window.level].message)
		if(window.levels[window.level].after !== undefined){
			window.levels[window.level].after();
		}
		window.level = window.level + 1;
		if(window.level > 1){
			$("#input_div").empty().text("//REPLACE ME WITH CODE")
		}
		$("#goal_div").empty().append($(window.levels[window.level].goal))

	} else {
		alert("Try again");
	}
}

function skip_level(){
		window.level = window.level + 1;
		$("#goal_div").empty().append($(window.levels[window.level].goal))

	
}

//LEVELS here//

window.levels = [{
	message: "Yes! Congratulations. You learned that the way code works is that the computer reads something written down (this is the code) and uses it to decide what to do, or what it should show on the screen. A code is basically a set of instructions for the computer. This is an example of the html tag for a button. You can edit the code to change what the computer does."
},
{goal:
	`
		<button style = "width:100px; height: 100px;" >I'M A BUTTON THAT SAYS THIS AND IS 100 pixels wide</button>
	`,
message:"Yes! Congratulations. You learned about the style attribute. The style attribute lets you choose how something that you coded onto the page will look. You unlocked the list of styles.",
after:function(){
	$("#style_list_button").show()
},
password:"pass"
},
{goal:
	`
		<button style = "width:400px; height: 100px; background-color:red;" >
			I'm a button with a red background
	     </button>
	`,
message:"Yes! Congratulations. You learned how to change the background-color.",
password:"password"
},
{goal:
	`
		<button style = "width:400px; height: 100px; background-color:red;font-size:20px" >
			I'm a button with a red background and font-size 20px
	     </button>
	     <button style = "">
			Create a second button
	     </button>
	`,
message:"Yes! Congratulations. You learned to create multiple buttons.",
password:"passwerd"
},
{goal:
	`
		<p> I'm a text element above an input where people can put in text</p>
		<input type = "text"><input>
	`,
message:"Congrats! You learned how to create an input element.",
password:"passwerd"
},
{goal:
	`	<p>Oh say can you see </p>
		<p>By the dawns early lights </p>
		<button>What so proudly</button>
		
	     
	`,
message:"Congratulations. You have truly excelled.",
password:"passwerd"
},


{goal:
	`	<p> Im a paragraph</p>
		<button>Click me to proceed</button>
		<input type = "text"></input>
		
	     
	`,
message:"Congratulations. You have truly excelled.",
password:"passwerd"
},

{goal:
	`	<p>This one's more creative. Use what you know already to create the outline for a simple notes app.</p>
	`,
message:"Congratulations. You are ready.",
password:"passwerd"
},
]
	</script>

<script type="text/javascript">
	var getFromBetween = {
    results:[],
    string:"",
    getFromBetween:function (sub1,sub2) {
        if(this.string.indexOf(sub1) < 0 || this.string.indexOf(sub2) < 0) return false;
        var SP = this.string.indexOf(sub1)+sub1.length;
        var string1 = this.string.substr(0,SP);
        var string2 = this.string.substr(SP);
        var TP = string1.length + string2.indexOf(sub2);
        return this.string.substring(SP,TP);
    },
    removeFromBetween:function (sub1,sub2) {
        if(this.string.indexOf(sub1) < 0 || this.string.indexOf(sub2) < 0) return false;
        var removal = sub1+this.getFromBetween(sub1,sub2)+sub2;
        this.string = this.string.replace(removal,"");
    },
    getAllResults:function (sub1,sub2) {
        // first check to see if we do have both substrings
        if(this.string.indexOf(sub1) < 0 || this.string.indexOf(sub2) < 0) return;

        // find one result
        var result = this.getFromBetween(sub1,sub2);
        // push it to the results array
        this.results.push(result);
        // remove the most recently found one from the string
        this.removeFromBetween(sub1,sub2);

        // if there's more substrings
        if(this.string.indexOf(sub1) > -1 && this.string.indexOf(sub2) > -1) {
            this.getAllResults(sub1,sub2);
        }
        else return;
    },
    get:function (string,sub1,sub2) {
        this.results = [];
        this.string = string;
        this.getAllResults(sub1,sub2);
        return this.results;
    }


};
$("#style_list_button").hide()
</script>

</body>
</html>
